// This file is generated by build.rs
include!(concat!(env!("OUT_DIR"), "/stmt.gen.rs"));

use std::{collections::HashSet, rc::Rc};

use crate::expr::ExprErr;

pub type StmtRes = Result<Stmt, ExprErr>;

// Function info: lots of stuff, so carry it around Rc'd.
pub struct Function {
	pub name: Token,

	// Functions have an identity; methods do not.
	pub identity: Option<VarRef>,
	pub vars: HashSet<VarRef>,
	pub param_count: u32,
	pub local_count: u32,

	pub captured: Vec<VarRef>,

	pub body: Vec<Stmt>,
	pub is_initializer: bool,
}

pub struct Class {
	pub name: Token,
	pub methods: Vec<Function>,
	pub init: Option<Function>,
	pub superclass: Option<VarRef>,
	pub identity: VarRef,
}